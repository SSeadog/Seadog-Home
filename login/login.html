<html>
  <head>
    <title>login</title>
  </head>
  <body>
    <div><font id="S" size="100">S</font></div>
    <div class="container">
      <span id="username"></span>
      <span>Hi!!!</span>
      <div class="user_login_form">
        <p id="subtitle">id</p>
        <input type="text" id="userid" name="userid" />
      </div>
    </div>
    <div class="" id="under">
      <span onClick="location.replace('../sign_up/add_form.html')">
        make account
      </span>
      <button id="next" onclick="chk_id()">next</button>
    </div>
  </body>
</html>

<script>
  function chk_id() {
    var id_ok = false;

    var userid = document.getElementById("userid").value;
    document.cookie = "userid=" + userid;

    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function () {
      if (this.readyState == 4 && this.status == 200) {
        if (this.responseText) {
          var exBtn = document.getElementById("next");
          var p = document.getElementById("under");
          p.removeChild(exBtn);

          var newBtn = document.createElement("button");
          newBtn.innerHTML = "next";
          newBtn.setAttribute("id", "next2");
          p.appendChild(newBtn);
          newBtn.addEventListener("click", chk_pw);

          document.getElementById("subtitle").innerHTML = "password";

          document.getElementById("username").innerHTML = this.responseText;

          document.getElementById("userid").value = "";
          document.getElementById("userid").setAttribute("id", "userpw");
        } else {
          console.log(false); //일치 아이디 없다
        }
      }
    };
    xhttp.open("GET", "login_id.php", true);
    xhttp.send();
  }

  function chk_pw() {
    var userpw = document.getElementById("userpw").value;
    document.cookie = "userpw=" + userpw;

    var username = document.getElementById("username").innerHTML;

    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function () {
      if (this.readyState == 4 && this.status == 200) {
        if (this.responseText == username) {
          location.replace("../home/home.html");
        } else {
          console.log("실패"); //일치 비번 없다
        }
      }
    };
    xhttp.open("GET", "login_pw.php");
    xhttp.send();
  }
</script>
