<html>
  <head>
    <title>Seadog</title>
  </head>
  <body onload="chk_login()">
    <div id="login">
      <input
        type="button"
        name="Button"
        id="lgBtn"
        value="login"
        onClick="location.href='../login/login.html'"
      />
    </div>
    <div id="Context">
      <font size="100">Seadog</font>
    </div>
  </body>
</html>

<script>
  function chk_login() {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function () {
      if (this.readyState == 4 && this.status == 200) {
        if (this.responseText) {
          var p = document.getElementById("login");
          var lgBtn = document.getElementById("lgBtn");
          p.removeChild(lgBtn);
          var usernameSpan = document.createElement("span");
          usernameSpan.innerHTML = this.responseText;
          p.appendChild(usernameSpan);
          var logoutBtn = document.createElement("input");
          logoutBtn.type = "button";
          logoutBtn.value = "logout";
          logoutBtn.addEventListener("click", logout);
          p.appendChild(logoutBtn);
        }
      }
    };
    xhttp.open("GET", "chk_session.php", true);
    xhttp.send();
  }

  function logout() {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function () {
      if (this.readyState == 4 && this.status == 200) {
        if (this.responseText) {
          location.reload();
        }
      }
    };
    xhttp.open("GET", "../login/logout.php", true);
    xhttp.send();
  }
</script>
